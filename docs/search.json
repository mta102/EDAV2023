[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Covid-19 Vaccine Hesitance Analysis",
    "section": "",
    "text": "1 Introduction\nVaccine hesitance is where individuals express reluctance or refusal to receive vaccines despite the widespread availability of vaccination services. It has been a longstanding issue in public health globally, despite global public healthcare messaging. Some causes of vaccine hesitance include mistrust in healthcare systems, concerns about vaccine safety or efficacy, religious or cultural beliefs, and misinformation, as mentioned here and here.\nDuring the COVID-19 pandemic, vaccine hesitance was an obstacle in the global response to the virus. The rapid development and deployment of COVID-19 vaccines simultaneously fueled scientific acclaim and concerns about their safety and long-term effects. Misinformation spread rapidly through social media and other channels, contributing to skepticism about the vaccines’ efficacy and safety. These uncertainties, coupled with existing mistrust in government health agencies and pharmaceutical companies, created a fertile ground for vaccine hesitance to take root.\nThe consequences of COVID-19 vaccine hesitance were profound. It slowed efforts to achieve widespread immunity, allowing the virus to persist and mutate, leading to the emergence of more transmissible variants. This prolonged the duration and severity of the pandemic, resulting in increased illness, death, and strain on healthcare systems worldwide, alongside exacerbating the economic and social impacts of the pandemic, as mentioned here.\nThe challenges posed by vaccine hesitance during the COVID-19 pandemic underscore the importance of addressing this issue as an integral part of future public health strategies. To that end, we propose to:\n\nStudy which segments of the population exhibited greatest covid vaccine hesitancy following the deployment of mass vaccinations in the US in early 2021\nAnalyse which segments showed the greatest reduction in covid vaccine hesitancy between 2021 and 2023\nPropose high-level recommendations for segments of the population that need further public health interventions"
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "2.1 Description",
    "text": "2.1 Description"
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.3 Missing value analysis",
    "text": "2.3 Missing value analysis\n\n2.3.1 Describe any patterns you discover in missing values. If no values are missing, graphs should still be included showing that. (suggested: 2 graphs plus commentary)\nOur missing value analysis analyzes where the missing data is, determines the meaning of the missing data in the specific context of our dataset; we then make appropriate corrections.\n\n\nCode\n# Flag whether a data point is NA\nmissing_vals_matrix &lt;- is.na(as.data.frame(covid))\n\n# Count NAs per column\nmissing_col_count &lt;- colSums(missing_vals_matrix)\n\n# Create a data frame with column names and NA counts\nmissing_vals_count_df &lt;- data.frame(Column = names(missing_col_count),\n                     NA_Count = missing_col_count)\n\n# Plot NA counts per column\n# All NAs are in the Estimate (%) column\nggplot(missing_vals_count_df,\n       aes(x = NA_Count, y = reorder(Column, NA_Count))) +\n  geom_bar(stat = \"identity\", fill = \"cornflowerblue\") +\n  labs(title = \"Missing Values by Column\",\n       x = \"Count of NAs\",\n       y = \"Dataset Attributes\") +\n  theme_bw()\n\n\n\n\n\nCode\n# To understand the NAs further, we made 3 observations which strongly indicates NA are in fact zero:\n\n# Observation 1: All NAs have a valid 95% confidence interval of between 0-0 to 0-0.3.\n\ncovid |&gt; filter(is.na(`Estimate (%)`)) |&gt;\n  ggplot(aes(x = `95% CI (%)`)) +\n  geom_bar(aes(y = (..count..)/sum(..count..)), color = \"black\", fill = \"orange\") +\n  labs(title = \"Confidence Intervals (CI) for NA Values\",\n       x = \"95% CI for NA Values\",\n       y = \"Proportion of Total NA Values\") +\n  theme(axis.text.x = element_text(angle = 0, vjust = 0.5, hjust=0.5))+\n  scale_y_continuous(labels = scales::percent)\n\n\n\n\n\nCode\n# Observation 2: Estimate (%) is rounded to 1 decimal point, and the lowest possible non-NA value is 0.1\ncovid |&gt; group_by(`Estimate (%)`) |&gt;  summarize(count = n())  |&gt; filter(`Estimate (%)`&lt;=0.2 | is.na(`Estimate (%)`)) |&gt; arrange(desc(`Estimate (%)`))\n\n\n# A tibble: 3 × 2\n  `Estimate (%)` count\n           &lt;dbl&gt; &lt;int&gt;\n1            0.2 25242\n2            0.1 30264\n3           NA   31788\n\n\nCode\n# Observation 3: Sense checks on subsets of the data where NAs are present are coherent, with a valid sample size, and the non-NA Estimate (%) summing up to 100\nNA_is_zero_proof1 &lt;- covid |&gt;\n  filter(Geography==\"Wisconsin\", `Time Period` == \"April 22 - May 29\",\n         Year==2021, `Group Name`==\"Age\",\n         `Indicator Name` == \"Vaccination uptake and intention\",\n         `Group Category` == \"65+ years\") |&gt;\n  select(`Group Category`,`Indicator Category`,`Estimate (%)`,\n         `Sample Size`,`95% CI (%)`)\n\n\n# Therefore, we will impute NAs as zeros \ncovid[is.na(covid)] = 0\n\n# Check: This does remove all NAs\ncolSums(is.na(covid))\n\n\n    Geography Type          Geography         Group Name     Group Category \n                 0                  0                  0                  0 \n    Indicator Name Indicator Category        Time Period               Year \n                 0                  0                  0                  0 \n         Time Type       Estimate (%)         95% CI (%)        Sample Size \n                 0                  0                  0                  0 \n  Suppression Flag \n                 0 \n\n\nOur exploration of NAs in the dataset revealed the following findings:\n\nNAs are isolated to the Estimated (%) column in our dataset.\nThe pattern of NAs across various response rate confidence intervals suggests that these NAs should correspond to a response rate of 0%.\nThis is further supported by another finding: there are 0 rows in the entire dataset showing a true 0% response rate. The lowest values that can be seen are 0.1%.\nMoreover, within each group and indicator containing at least one NA, the sum of response rates across the non-NA values adds up to 100%.\n\nBased on the findings above, we can safely conclude that the NAs in our dataset represent true 0% response rates. As such, we will impute NAs with 0s for our analysis purposes."
  },
  {
    "objectID": "data.html#technical-description",
    "href": "data.html#technical-description",
    "title": "2  Data",
    "section": "2.1 Technical Description",
    "text": "2.1 Technical Description\n\n2.1.1 Identify one or more data sources:\nThe data source which we will use for our study is the CDC’s National Immunization Survey Adult COVID Module (NIS-ACM). It provides information on COVID-19 vaccination status and intent, segmented by geography, age, ethnicity, socio-economic status, and other characteristics. The data can be found here\n\n\n2.1.2 How the data are collected and by whom:\nThe data was collected by the CDC through a series of telephone interviews conducted between April 2021 and June 2023 (latest sample available). Each week, the CDC surveyed between 7,500 to 20,000 US adults aged 18 years and above using a random-digit-dialed sample of cell telephone numbers. These samples were stratified by state, the District of Columbia, and five local jurisdictions (Bexar County, TX; Chicago, IL; Houston, TX; New York City, NY; and Philadelphia County, PA). During some survey periods, Guam, the US Virgin Islands, and Puerto Rico were included as well.\nTo correct any imbalances or biases in the sample that might arise due to the survey design or data collection methods, the CDC applied weights to the proportion of the sampled individuals giving a particular response in the survey.\n\n\n2.1.3 Format of the data:\nThe data is presented as a CSV file in a “pivot longer” format that is downloadable from the CDC’s website provided above. The exact format can be seen without exporting the data using the following link: https://data.cdc.gov/Vaccinations/National-Immunization-Survey-Adult-COVID-Module-NI/udsf-9v7b\nThe first four columns (Geography Type, Geography, Group Name, and Group Category) are used to characterize the segments of individuals who were surveyed, where any given Geography may contain multiple Group Names and Group Categories. For example, the Geographies “Alabama” and “New York” will each have multiple Group Names, such as “Age by race/ethnicity” or “Pregnancy status (females age 18 – 49 years)”.\nThe next two columns in the dataset, Indicator Name and Indicator Category, specify the vaccination status/intent variables being analyzed. Each Indicator Name is comprised of several Indicator Categories. For instance, the Indicator Name “Vaccination uptake and intention” has four possible responses such as “Probably or definitely will not get vaccinated” or “Definitely will get vaccinated”.\nIn addition to the combinations of geographies, participant groups, and survey questions/answers, the data is further subdivided by time period and duration of data collection, which can either be weekly or monthly.\nFor all the permutations mentioned above, the response rates/proportions and their corresponding confidence intervals and sample sizes are recorded in the columns Estimate (%), 95% CI (%), and Sample Size, respectively.\nA complete column-by-column description of all attributes in the dataset is available in the “Columns in This Dataset” section of the page linked below: list https://data.cdc.gov/Vaccinations/National-Immunization-Survey-Adult-COVID-Module-NI/udsf-9v7b\nGiven that the participant demographics and combinations of survey questions and answers have been pivoted, each “row” of data represents a single observation for each segment/demographic.\n\n\n2.1.4 Frequency of updates:\nThe data is updated weekly, with the first samples of data having been collected the week of Apr 22 – May 1 2021 and the latest samples corresponding to the week of June 25 – June 30 2023. The CDC also aggregates its weekly estimates to determine monthly estimates.\n\n\n2.1.5 Dimensions:\nThe data contains 5.08M rows x 13 columns.\n\n\n2.1.6 Other relevant information:\nThe dataset includes the following additional information, which we will not be studying, as it does not directly address the question of vaccine hesitance: - Vaccination coverage - Bivalent booster update & intention\n\n\n2.1.7 Potential issues/concerns with the data:\nThrough data exploration and reviews of the data source documentation, we identified the following potential concerns:\n\nAll responses are self-reported & random dialed, making the data quality susceptible to misreporting by respondents.\nDue to the random sampling performed, the individuals being interviewed will differ from one period of time to another. While this limits our ability to track changes in perspective from the same people over time, it is likely not going to be an issue since we are concerned with population level statistics rather than individual statistics.\nThe sample size in the dataset varies by demographic subgroup. Ideally, it would be stratified, but this is likely not possible due to the random-dialed survey design (i.e. the CDC cannot target phone calls to specific demographics). This is likely accounted for by the CDC’s estimate weighting technique.\nThere appear to be rounding errors in the response rate estimates. For any given combination of geography, participant group, question, and time period, the sum of proportions do not exactly equal 100%. This is due to the response rates in the Estimate (%) column being rounded to just one decimal point. As a result, some sub-samples sum up to 101% across all the response options specified in the Indicator Category.\nThe data contains NAs in the Estimate (%) column. According to the data source documentations, NAs should only be present in smaller sub-samples (&lt;30) for which the data was intentionally suppressed. However, our data exploration revealed that groups with larger sample sizes, even surpassing 10,000, contained NAs in the Estimate (%) column. Conversely, some groups with samples less than 30 do not have NA response rate values. A related concern is that the Suppression Flag (1 = suppressed) should only be set to 1 where sample sizes were smaller than 30; however, we see Suppression values of 1 for groups of larger sizes. In some instances, the Estimate (%) may not be NA, yet the Suppression Flag was still set to 1.\n\n\n\n2.1.8 How to import the data:\n\nSelect Download Data Table from the link provided at the beginning of the technical description.\nOn the following page, select Export from the top right corner next to the Actions button.\nKeep the default Export Format as CSV and click Download.\nOnce downloaded, import the dataset into RStudio for analysis. The function fread() from the data.table library is recommended to reduce load time."
  },
  {
    "objectID": "data.html#research-plan",
    "href": "data.html#research-plan",
    "title": "2  Data",
    "section": "2.2 Research plan",
    "text": "2.2 Research plan\n\n2.2.1 Explain in detail how your data will enable you to answer your research questions from the introduction.\nThe dataset chosen provides a number of interesting factors to be examined in the context of vaccine hesitance. Below, we have outlined the fields we plan to leverage in order to explore potential relationships between our dependent variable - vaccine hesitance response rates - and various independent variables such as geography, age, and ethnicity.\nDependent Variable(s)\nThe data contains the following dependent variables of interest to our study, which can be identified by filtering our starting-point table for Indicator Name = “Vaccine uptake and intention”:\n\nEstimate (%) (i.e., response rate) for Indicator Category = “Probably or definitely will not get vaccinated”\nEstimate (%) for Indicator Category = “Probably will not get vaccinated or unsure”\nEstimate (%) for Indicator Category = “Definitely will get vaccinated”\nEstimate (%) for Indicator Category = “Vaccinated (&gt;=1 dose)”\n\nWhere applicable, we can combine the dependent variables above into the following two options:\n\nHesitant: Indicator Category = “Probably or definitely will not get vaccinated”\nNot hesitant or unsure: all other values in the ‘Indicator Category’\n\nIndependent variables\nThe correlation between the hesitance and the following independent variables (as defined by the column “Group Name”) will be studied initially nationally (as defined by the column “Geography”), but any geographical disparities may be highlighted on a case by case basis:\nDemographics:\n\nGender\nAge\nRace\nAge & race\nSexual orientation\nGender identity\nRural/urban\nBirth\nInterview language\nPoverty\nInsurance\nSocial vulnerability index (SVI)\nPolitical leaning\n\nHealth condition\n\nPrevious vaccination status\nComorbidity\nDisability\nPregnancy\nPast covid-19 contraction\nReaction to previous dose of vaccine\n\n“Thinking & feeling”\n\nConcern about getting disease\nVaccine safety concerns\n“Importance” of vaccine\n\nSocial pressure\n\nRecommended by healthcare providers\nFamily & friends’ vaccination status\nEmployer vaccine mandate\n\nLogistics\n\nDifficulty in accessing vaccine (general “difficulty”, distance to site, convenience, uncertainty about eligibility, cost, difficulty in getting an appointment)\n\nTime window\nWe would also like to study changes in hesitance at particular points in time and changes over a large period of time (2 years, from Apr/May 2021 to Jun 2023). As such, we we will use the Time Period field as another variable for this analysis. While the data is broken down between weekly and monthly samples, we will be focusing on monthly data for our study. This is because we do not expect significant changes in hesitance on a weekly basis, and attempting to compare weekly data could be subject to sampling error due to the random-dialed study design.\n\n\n2.2.2 Approach:\nOur analysis approach can be broken down into the following key activities:\n\n2.2.2.1 Part 1: Study which segments of the population exhibited greatest covid vaccine hesitancy following the deployment of mass vaccinations in the US in early 2021.\nThis process will consist of the following steps:\n\nWriting R-code to auto rank every possible segment’s hesitance by statistical significance (i.e. using p-values and test-statistics from Chi-sq tests) at a point in time specified below.\nBuilding visuals of the 10 segments with the strongest association to vaccine hesitance to draw additional insights. For this step, we are considering using the following graph types: (x / indpt vars are cat: y / dep vars are numerical (% or n stating “Probably or definitely will not get vaccinated”)\nBars / stacked bars\nMosaic plots\nSpatial heatmaps\nThe snapshot in time we will be using to measure associations will comprise of the first three monthly periods of data available, where the average proportion of responses corresponding to vaccine hesitance was ~18%. To combine the three monthly periods, we will create a weighted average of the survey responses. For instance, if vaccine hesitance rates for a particular group were 20 out 100 (20%) in month 1, 20/150 (13%) in month 2, and 10/90 (11%) in month 3, the weighted average hesitance rate for that group would be 50/340 (14.7%).\n\nThe rationale for choosing the first three monthly periods of data is due to the prevalence and relative stability of hesitance during that time frame. Below, we will visualize vaccine hesitance over time to illustrate this.\n\n2.2.2.1.1 Import Libraries\n\n\nCode\n# install.packages(\"data.table\")\nlibrary(tidyverse)\nlibrary(data.table)\nlibrary(lubridate)\n\n\n\n\n2.2.2.1.2 Import dataset\n\n\nCode\n# Load dataset\ncovid &lt;- fread(\"../covid_dataset/covid.csv\")\n\n\n\n\n2.2.2.1.3 Plot vaccine hesitance over time\n\n\nCode\n# Filter for the vaccination uptake and intent indicator\n# Filter for responses corresponding to vaccine hesitancy\n# Include all adults 18+\n# Set time period to monthly (excluding weekly samples) and filter for nationwide samples\nvacc_intention_time &lt;- covid |&gt;\n  filter(`Indicator Name` == 'Vaccination uptake and intention') |&gt;\n  filter(`Indicator Category` == 'Probably or definitely will not get vaccinated') |&gt;\n  filter(`Group Name` == 'All adults 18+') |&gt;\n  filter(`Time Type` == 'Monthly') |&gt;\n  filter(Geography == 'National') |&gt;\n  arrange(`Geography Type`, Geography, `Time Period`)\n\n# Derive month of data collection\nvacc_intention_time &lt;- vacc_intention_time |&gt;\n  mutate(month_split = paste0(str_split(`Time Period`, \"-\",\n                                        simplify = TRUE)[, 2],\n         \", \", Year),\n         month = mdy(month_split))\n\n# Plot hesitancy over time\nggplot(vacc_intention_time, aes(x = month, y = `Estimate (%)`,\n                                color = `Indicator Category`)) +\n  geom_line() +\n  labs(title = \"U.S. Vaccination Response Rates Over Time\",\n       x = \"Month\",\n       y = \"Response Rate (%)\") +\n  theme(legend.position = \"bottom\") +\n  guides(color = guide_legend(title = \"Indicator Category:\"))\n\n\n\n\n\n\n\n\n2.2.2.2 Part 2: Analyze which segments showed the greatest reduction in covid vaccine hesitancy between 2021 and 2023\nWe will analyse which segments showed the greatest reduction in COVID vaccine hesitancy between 2021 and 2023. To perform this step, we will leverage several visuals that can provide insights into trends of hesitancy over time:\n\nCleveland dot plot - plot or annual snapshot of change in variable(s) of interest over time\nGeographic heatmap (colours = changes)\nBar chart\n\n\n\n2.2.2.3 Part 3: Based on the findings above, we will propose high-level recommendations for segments of the population that need further public health interventions."
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nlibrary(data.table)\n\n\n\nAttaching package: 'data.table'\n\nThe following objects are masked from 'package:lubridate':\n\n    hour, isoweek, mday, minute, month, quarter, second, wday, week,\n    yday, year\n\nThe following objects are masked from 'package:dplyr':\n\n    between, first, last\n\nThe following object is masked from 'package:purrr':\n\n    transpose\n\n\nCode\nlibrary(vcd)\n\n\nLoading required package: grid\n\n\nCode\ncovid &lt;- fread(\"../covid_dataset/covid.csv\")\n\n\n\n3.0.0.1 Part 1: Study which segments of the population exhibited greatest covid vaccine hesitancy following the deployment of mass vaccinations in the US in early 2021.\nThe national average reported covid hesitance rate during the first quarter of the data collection period (April - June 2021) was 17.7%.\n\n\nCode\nperiods_to_combine_2021 = c(\"April 22 - May 29\",\"May 30 - June 26\",\"June 27 - July 31\") \n\nnational_hesitance_rate = covid%&gt;% filter(`Year` == 2021, `Time Period` %in% periods_to_combine_2021, `Group Category`== \"All adults age 18+ years\", Geography == \"National\", `Indicator Category` == \"Probably or definitely will not get vaccinated\") %&gt;% mutate(n_hesitant = round(`Estimate (%)`/100 * `Sample Size`,0)) %&gt;% group_by(Geography) %&gt;% summarise(`Sample Size` = sum(`Sample Size`), n_hesitant = sum(n_hesitant)) %&gt;% mutate(`Estimate (%)` = n_hesitant / `Sample Size` * 100, `Time Period` = \"2021 analysis period\",Year = 2021) \n\n\nThere were significant differences of hesitance by state during this period, from 7.9% in Hawaii, to 33.3% in Wyoming, as illustrated in the map below.\n\n\nCode\ncovid_2021_analysis_allstates = covid%&gt;% filter(`Year` == 2021, `Time Period` %in% periods_to_combine_2021, `Group Category`== \"All adults age 18+ years\", `Geography Type` %in% c(\"Jurisdictional Estimates\"), `Indicator Category` == \"Probably or definitely will not get vaccinated\", !grepl(\"-\",Geography)) %&gt;% mutate(n_hesitant = round(`Estimate (%)`/100 * `Sample Size`,0)) %&gt;% group_by(Geography) %&gt;% summarise(`Sample Size` = sum(`Sample Size`), n_hesitant = sum(n_hesitant)) %&gt;% mutate(`Estimate (%)` = n_hesitant / `Sample Size` * 100, `Time Period` = \"2021 analysis period\",Year = 2021) \n\n#Karl to add map code here, using covid_2021_analysis_allstates%`Estimate (%)` for heatmap\n\n\nThe histogram and boxplot below shows that there are no clear outliers, even though over 50% of states fall outside the 1st and 3rd quartile.\n\n\nCode\nggplot(covid_2021_analysis_allstates, aes(x = `Estimate (%)`)) +\n  geom_histogram(binwidth = 5, fill = \"blue\", color = \"black\", alpha = 0.7) +\n  geom_boxplot() +\n  labs(title = \"State distribution of hesitance\", x = \"Hesitance %\", y = \"No. of states\")\n\n\n\n\n\nCode\nquartiles_1_3 = quantile(covid_2021_analysis_allstates$`Estimate (%)`, c(0.25, 0.75))\nn_outside_IQR = sum(covid_2021_analysis_allstates$`Estimate (%)` &lt; quartiles_1_3[1] | covid_2021_analysis_allstates$`Estimate (%)` &gt; quartiles_1_3[2])/nrow(covid_2021_analysis_allstates) * 100\n\n\nNationally, it can be seen that the following 10 segments demonstrated the highest vaccine hesitance rates in the period in question.\n\n\nCode\ngroup_name_shortening &lt;- c(\n\"Sex\" = \"Sex\",\"Age\" = \"Age\",\"Race/Ethnicity (7 level)\" = \"Race\",\"Age by race/ethnicity\" = \"Age.Race\",\"Sexual orientation\" = \"S.Orientation\",\"Gender identity\" = \"G.Identity\",\"Metropolitan statistical area\" = \"Rural.Urban\",\"Born in the U.S.\" = \"US.Born\",\"Language of interview\" = \"Language\",\"Poverty status\" = \"Pov.Status\",\"Insurance status\" = \"Insurance\",\"Social Vulnerability Index (SVI) of county of residence\" = \"SVI\",\"Political leaning of county of residence\" = \"Political\",\"Received non-COVID-19 vaccine(s) in past two years\" = \"Past.Vaccin\",\"Health condition associated with higher risk for COVID-19 (any)\" = \"Comorbidity\",\"Disability status (any)\" = \"Disability\",\"Pregnancy status (females age 18 – 49 years)\" = \"Pregnancy\",\"Ever had COVID-19 disease (self-report)\" = \"Past.Covid\",\"Concern about getting COVID-19 disease\" = \"Covid.Concern\",\"Confidence in COVID-19 vaccine safety\" = \"Vaccine.Confiden\",\"Confidence that COVID-19 vaccine is important\" = \"Vaccine.Imprtnt\",\"Healthcare provider recommended I get a COVID-19 vaccine\" = \"Dr.Recommend\",\"COVID-19 vaccination status of friends and family\" = \"Fr.Fam.Vaccd\",\"Work or school requires COVID-19 vaccination\" = \"Work.School\"\n)\n\ngroup_cat_shortening = c(\"18 – 49 years\" = \"18 – 49\",\"50 – 64 years\" = \"50 – 64\",\"65+ years\" = \"65+\",\"18 – 49 years, Black, non-Hispanic\" = \"18 – 49, Black\",\"18 – 49 years, Hispanic\" = \"18 – 49, Hispanic\",\"18 – 49 years, Other or multiple races, non-Hispanic\" = \"18 – 49, Other\",\"18 – 49 years, White, non-Hispanic\" = \"18 – 49, White\",\"50 – 64 years, Black, non-Hispanic\" = \"50 – 64, Black\",\"50 – 64 years, Hispanic\" = \"50 – 64, Hispanic\",\"50 – 64 years, Other or multiple races, non-Hispanic\" = \"50 – 64, Other\",\"50 – 64 years, White, non-Hispanic\" = \"50 – 64, White\",\"65+ years, Black, non-Hispanic\" = \"65+, Black\",\"65+ years, Hispanic\" = \"65+, Hispanic\",\"65+ years, Other or multiple races, non-Hispanic\" = \"65+, Other\",\"65+ years, White, non-Hispanic\" = \"65+, White\",\"Born in the U.S.\" = \"US Born\",\"Not born in the U.S.\" = \"Not US Born\",\"Many or almost all family or friends have received vaccine\" = \"Many\",\"Some or no family or friends have been vaccinated\" = \"No_some\",\"A little or not at all concerned\" = \"A little_not\",\"Very or moderately concerned\" = \"Very_Moderately\",\"Somewhat or not at all safe for me\" = \"Not at all_Somewhat\",\"Very or completely safe for me\" = \"Very\",\"A little or not at all important to protect me from COVID-19\" = \"A little_not at all\",\"Somewhat or very important to protect me from COVID-19\" = \"Somewhat_very\",\"No\" = \"No\",\"Yes\" = \"Yes\",\"Cisgender\" = \"Cisgender\",\"Don't know/refused\" = \"Dont know\",\"Transgender/Non-binary\" = \"TG/Non bin\",\"Insured\" = \"Insured\",\"Not insured\" = \"Not insured\",\"English\" = \"English\",\"Other\" = \"Other\",\"Spanish\" = \"Spanish\",\"Rural\" = \"Rural\",\"Suburban\" = \"Suburban\",\"Urban\" = \"Urban\",\"Democrat-leaning\" = \"Democrat\",\"Not Democrat-leaning or Republican-leaning\" = \"None\",\"Republican-leaning\" = \"Republican\",\"Above poverty, income &lt;$75k\" = \"&lt;$75k\",\"Above poverty, income &gt;=$75k\" = \"&gt;=$75k\",\"Below poverty\" = \"Below poverty\",\"Unknown income\" = \"Unknown\",\"Breastfeeding\" = \"Breastfeeding\",\"Not pregnant, trying to get pregnant, or breastfeeding\" = \"Not pregnant\",\"Pregnant\" = \"Pregnant\",\"Trying to get pregnant\" = \"Trying to get pregnant\",\"American Indian/Alaska Native, non-Hispanic\" = \"Native\",\"Asian, non-Hispanic\" = \"Asian\",\"Black, non-Hispanic\" = \"Black\",\"Hispanic\" = \"Hispanic\",\"Native Hawaiian/Pacific Islander, non-Hispanic\" = \"Pacific\",\"Other or multiple races, non-Hispanic\" = \"Other\",\"White, non-Hispanic\" = \"White\",\"Female\" = \"Female\",\"Male\" = \"Male\",\"Gay/Lesbian/Bisexual/Other\" = \"LGB\",\"Heterosexual/Straight\" = \"Hetero\",\"High SVI\" = \"High\",\"Low SVI\" = \"Low\",\"Moderate SVI\" = \"Moderate\",\"SVI unknown\" = \"Unknown\",\"Not applicable/unemployed\" = \"Unemployed\")\n\n\ngroup_name_toloop = c(\"Sex\",\"Age\",\"Race/Ethnicity (7 level)\",\"Age by race/ethnicity\",\"Sexual orientation\",\"Gender identity\",\"Metropolitan statistical area\",\"Born in the U.S.\", \"Language of interview\",\"Poverty status\", \"Insurance status\",\"Social Vulnerability Index (SVI) of county of residence\", \"Political leaning of county of residence\", \"Received non-COVID-19 vaccine(s) in past two years\", \"Health condition associated with higher risk for COVID-19 (any)\",\"Disability status (any)\", \"Pregnancy status (females age 18 – 49 years)\", \"Ever had COVID-19 disease (self-report)\",\"Concern about getting COVID-19 disease\", \"Confidence in COVID-19 vaccine safety\",  \"Confidence that COVID-19 vaccine is important\", \"Healthcare provider recommended I get a COVID-19 vaccine\",  \"COVID-19 vaccination status of friends and family\",\"Work or school requires COVID-19 vaccination\" )\n\ngroup_name_toloop_short = lapply(group_name_toloop, function(x) ifelse(x %in% names(group_name_shortening), group_name_shortening[[x]], x))\n  \n\n\ncovid_2021_analysis = covid%&gt;% filter(`Year` == 2021, `Time Period` %in% periods_to_combine_2021, `Group Name` %in% group_name_toloop, `Geography Type` %in% c(\"Jurisdictional Estimates\",\"National Estimates\"), `Indicator Category` == \"Probably or definitely will not get vaccinated\", !grepl(\"-\",Geography)) %&gt;% mutate(n_hesitant = round(`Estimate (%)`/100 * `Sample Size`,0)) %&gt;% group_by(pick(c(1:6))) %&gt;% summarise(`Sample Size` = sum(`Sample Size`), n_hesitant = sum(n_hesitant)) %&gt;% filter(Geography == \"National\") %&gt;% mutate(`Estimate (%)` = n_hesitant / `Sample Size` * 100, `Time Period` = \"2021 analysis period\",Year = 2021)\n\n\n`summarise()` has grouped output by 'Geography Type', 'Geography', 'Group\nName', 'Group Category', 'Indicator Name'. You can override using the `.groups`\nargument.\n\n\nCode\n#shorten group names\ncovid_2021_analysis = covid_2021_analysis %&gt;%\n  mutate_at(vars(`Group Name`), ~recode(., !!!group_name_shortening))\n\ncovid_2021_analysis = covid_2021_analysis %&gt;%\n  mutate_at(vars(`Group Category`), ~recode(., !!!group_cat_shortening))\n\ncovid_2021_analysis = covid_2021_analysis %&gt;% mutate(concat = paste(`Group Name`, `Group Category`, sep = \" - \"))\n\ncovid_2021_analysis$concat_wrap = str_wrap(covid_2021_analysis$concat, width = 10)\n\ncovid_2021_analysis %&gt;% ungroup %&gt;% top_n (10, `Estimate (%)`) %&gt;% ggplot(aes(x = fct_reorder(concat_wrap,-(`Estimate (%)`)), y = `Estimate (%)`)) +  geom_bar(stat = \"identity\")+\nlabs(title = \"Top 10 categories with the highest hesitance in 2021\", x = \"Group categories\", y = \"2021 hesitance (%)\") +\n  theme_minimal() + \n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1,size=6),\n        axis.text.y = element_text(size=8),\n        axis.title = element_text(size = 8),\n        plot.title = element_text(size = 12))\n\n\n\n\n\nCode\ntop_10_highest_hesitance_cat_list = c(covid_2021_analysis %&gt;% ungroup %&gt;% top_n (10, `Estimate (%)`) %&gt;% select(concat))\n\n\nAnalysing 10 states with the highest and lowest hesitance, the parallel coordinate plots below will review geographical patterns in segments of the population with the highest hesitance.\n#Karl to add parallel coordinate plots here and commentary using top_10_highest_hesitance_cat_list\nGiven the inconsistent trends seen across states and group categories with the highest hesitance, we proceeded to conduct chi squared tests on every group name defined within the scope of this exercise [link back to data.qmd] to determine those with the highest statistical significance.\n\n\nCode\nget_chi_sq&lt;-function(df,geography,time_period,year,group_name,hesitant_group) {\n  \n  temp = df |&gt; filter(Geography == geography,`Indicator Name`==\"Vaccination uptake and intention\", `Time Period` == time_period,Year == year, `Group Name`==group_name)  |&gt; mutate(hesitant = ifelse(`Indicator Category` %in% hesitant_group,1,0)) |&gt; group_by(`Group Category`,hesitant) |&gt; summarise(hesitance_rate = sum(`Estimate (%)`),sample_size = first(`Sample Size`)) |&gt; mutate(n_hesitance = round(hesitance_rate/100 * sample_size,0)) |&gt; filter(hesitant == 1) |&gt; select(`Group Category`,n_hesitance,sample_size) \n  if (nrow(temp) &gt; 0) {\n    expected_proportion = sum(temp$n_hesitance)/sum(temp$sample_size)\n\n  temp = temp |&gt; mutate(expected = sample_size*expected_proportion)\n  \n  res = chisq.test(x=temp$n_hesitance,p=temp$expected/sum(temp$expected))\n   output&lt;-list(round(res$statistic,digits = 0),res$p.value)\n    \n  }\n  else {\n    output&lt;-list(0,0)\n    \n  }\n  \n  \n   return(output)\n}\n\ngroup_name_toloop = c(\"Sex\",\"Age\",\"Race/Ethnicity (7 level)\",\"Age by race/ethnicity\",\"Sexual orientation\",\"Gender identity\",\"Metropolitan statistical area\",\"Born in the U.S.\", \"Language of interview\",\"Poverty status\", \"Insurance status\",\"Social Vulnerability Index (SVI) of county of residence\", \"Political leaning of county of residence\", \"Received non-COVID-19 vaccine(s) in past two years\", \"Health condition associated with higher risk for COVID-19 (any)\",\"Disability status (any)\", \"Pregnancy status (females age 18 – 49 years)\", \"Ever had COVID-19 disease (self-report)\",\"Concern about getting COVID-19 disease\", \"Confidence in COVID-19 vaccine safety\",  \"Confidence that COVID-19 vaccine is important\", \"Healthcare provider recommended I get a COVID-19 vaccine\",  \"COVID-19 vaccination status of friends and family\",\"Work or school requires COVID-19 vaccination\" )\n\ngroup_name_toloop_short = lapply(group_name_toloop, function(x) ifelse(x %in% names(group_name_shortening), group_name_shortening[[x]], x))\n  \n\nresult_df2 &lt;- data.frame(matrix(ncol = 3, nrow = 0))\ncolnames(result_df2) &lt;- c(\"group_name\", \"X2_test_stat\", \"p_value\")\n\nfor (x in group_name_toloop_short) {\n  res = get_chi_sq(covid_2021_analysis,geography=\"National\",time_period = \"2021 analysis period\",year=2021,group_name=x,hesitant_group = c(\"Probably or definitely will not get vaccinated\"))\n  result_df2[nrow(result_df2) + 1,] = c(x,res[1],res[2])\n\n}\n\n\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n`summarise()` has grouped output by 'Group Category'. You can override using\nthe `.groups` argument.\n\n\nCode\nresult_df2 = arrange(result_df2,desc(X2_test_stat))\n\n\nThe top 10 most statistically significant group names are shown below:\n\n\nCode\nresult_df2 %&gt;% ungroup %&gt;% top_n(10,X2_test_stat)\n\n\n         group_name X2_test_stat p_value\n1   Vaccine.Imprtnt        78443       0\n2  Vaccine.Confiden        45851       0\n3      Fr.Fam.Vaccd        33687       0\n4       Past.Vaccin        12886       0\n5     Covid.Concern         7882       0\n6          Age.Race         6893       0\n7               Age         5585       0\n8         Political         4616       0\n9       Work.School         3969       0\n10     Dr.Recommend         3823       0\n\n\nTwo illustrative mosaic plots are shown below to confirm the chi square test result above - one for the group name with the higest X2 score (the segment that felt vaccines were important), and one for the lowest (gender identity).\n\n\nCode\nmosaic_2var &lt;-function(df,indep_var_group_name,n_chars) {\nlibrary(vcd)\n  truncate_string &lt;- function(x) {\n  str_sub(x, 1, n_chars)}\n\nindep_var_group_name_no_spaces = gsub(\"[()\\\\[/\\\\\\\\ ]\", \".\", indep_var_group_name)\nindep_var_group_name_no_spaces = truncate_string(indep_var_group_name_no_spaces)\n\ntemp = df %&gt;% ungroup %&gt;% filter(`Group Name` == indep_var_group_name) %&gt;% mutate(n_not_hesitant = `Sample Size` - n_hesitant) %&gt;%  select(`Group Category`, n_hesitant, n_not_hesitant,`Sample Size`) %&gt;%  rename(\n    !!indep_var_group_name_no_spaces := `Group Category`,hesitant = `n_hesitant`, `not hesitant` = n_not_hesitant) %&gt;% \n  pivot_longer(cols = hesitant:`not hesitant`,names_to = \"group\", values_to = \"Freq\" )\n\ntemp[[indep_var_group_name_no_spaces]] =  substr(temp[[indep_var_group_name_no_spaces]], 1, n_chars)\n\nformula = as.formula(paste(\"group\", \"~\", indep_var_group_name_no_spaces))\n\nmosaic(formula, direction = c(\"v\", \"h\"), temp,\n       highlighting_fill = c(\"grey80\", \"cornflowerblue\"),gp_varnames = gpar(fontsize = 10, fontface = 1), gp_labels = gpar(fontsize = 6))\nreturn(temp)\n}\n\nmosaic_2var(covid_2021_analysis,\"Vaccine.Imprtnt\",100)\n\n\n\n\n\n# A tibble: 4 × 4\n  Vaccine.Imprtnt     `Sample Size` group          Freq\n  &lt;chr&gt;                       &lt;int&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 A little_not at all         28357 hesitant      19088\n2 A little_not at all         28357 not hesitant   9269\n3 Somewhat_very              175006 hesitant       6501\n4 Somewhat_very              175006 not hesitant 168505\n\n\nCode\nmosaic_2var(covid_2021_analysis,\"G.Identity\",100)\n\n\n\n\n\n# A tibble: 6 × 4\n  G.Identity `Sample Size` group          Freq\n  &lt;chr&gt;              &lt;int&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 Cisgender         186524 hesitant      33215\n2 Cisgender         186524 not hesitant 153309\n3 Dont know          11179 hesitant       1864\n4 Dont know          11179 not hesitant   9315\n5 TG/Non bin          8087 hesitant       1371\n6 TG/Non bin          8087 not hesitant   6716\n\n\nIt can be clearly seen that those that saw a vaccine as important had significantly lower hesitance than those that did not. However, for the group name with the lowest X2 score (gender identity), the observed and expected mosaic plots are nearly identical, thus confirming the X2 test result.\n[add commentary on results]\n\n\n3.0.0.2 Part 2: Analyze which segments showed the greatest reduction in covid vaccine hesitancy between 2021 and 2023\nWe have already illustrated that national vaccine hesitance declined from around 18% in April/May 2021 to around 11% in June/July 2023.\n\n\nCode\n# Filter for the vaccination uptake and intent indicator\n# Filter for responses corresponding to vaccine hesitancy\n# Include all adults 18+\n# Set time period to monthly (excluding weekly samples) and filter for nationwide samples\nvacc_intention_time &lt;- covid |&gt;\n  filter(`Indicator Name` == 'Vaccination uptake and intention') |&gt;\n  filter(`Indicator Category` == 'Probably or definitely will not get vaccinated') |&gt;\n  filter(`Group Name` == 'All adults 18+') |&gt;\n  filter(`Time Type` == 'Monthly') |&gt;\n  filter(Geography == 'National') |&gt;\n  arrange(`Geography Type`, Geography, `Time Period`)\n\n# Derive month of data collection\nvacc_intention_time &lt;- vacc_intention_time |&gt;\n  mutate(month_split = paste0(str_split(`Time Period`, \"-\",\n                                        simplify = TRUE)[, 2],\n         \", \", Year),\n         month = mdy(month_split))\n\n# Plot hesitancy over time\nggplot(vacc_intention_time, aes(x = month, y = `Estimate (%)`,\n                                color = `Indicator Category`)) +\n  geom_line() +\n  labs(title = \"U.S. Vaccination Response Rates Over Time\",\n       x = \"Month\",\n       y = \"Response Rate (%)\") +\n  theme(legend.position = \"bottom\") +\n  guides(color = guide_legend(title = \"Indicator Category:\"))\n\n\n\n\n\nHowever, some segments of the population demonstrated more decline in hesitance than others. The Cleveland dot plot below shows the change in hesitance by population segment, for the 20 most hesitant segments in 2021.\n\n\nCode\nannual_monthly_snapshots = c(\"April 22 - May 29\",\"May 1 - May 28\",\"April 30 - May 27\")\n\nsnapshots = covid %&gt;% filter(`Time Period` %in% annual_monthly_snapshots,`Group Name` %in% group_name_toloop, Geography == \"National\",`Indicator Category` == \"Probably or definitely will not get vaccinated\" ) %&gt;% mutate(Year = as.factor(Year)) %&gt;% mutate_at(vars(`Group Name`), ~recode(., !!!group_name_shortening)) %&gt;% mutate_at(vars(`Group Category`), ~recode(., !!!group_cat_shortening)) %&gt;%   mutate(rows = paste(`Group Name`, `Group Category`, sep = \" - \")) %&gt;% select(rows,Year,`Estimate (%)`) %&gt;% arrange(rows, Year) \n\nrow_order = snapshots %&gt;% pivot_wider(names_from = Year, values_from = `Estimate (%)`) %&gt;% drop_na(`2021`) %&gt;% drop_na(`2023`) %&gt;% mutate(decline_21_23 = `2021` - `2023`) %&gt;% arrange((decline_21_23))\n\nrow_order_list_chg_21_23 = c(row_order$rows)\n\nrow_order_list_2021 = row_order  %&gt;% arrange(`2021`) %&gt;% top_n(20,`2021`) %&gt;% select(rows)\nrow_order_list_2021 = row_order_list_2021$rows               \n\nrow_order_list_2023 = c(row_order %&gt;% arrange((`2023`)) %&gt;% select(rows))\n\nsnapshots  = snapshots[snapshots$rows %in% row_order_list_chg_21_23, ]\n\n\nsnapshots  %&gt;%  filter(rows %in% row_order_list_2021) %&gt;% ggplot(aes(x = `Estimate (%)`, y = fct_relevel(rows,(row_order_list_2021)), color = Year)) +\n  geom_point(size = 1) +\n  labs(title = \"20 most hesitant segments in 2021, and changes in 2022-23\", x = \"Vaccine hesitance (%)\", y = \"Sample segments\") +\n  theme(legend.position = \"bottom\",axis.text.x = element_text(size = 10), axis.text.y = element_text(size = 6), plot.title = element_text(size = 10))\n\n\n\n\n\nIt can be seen from the cleveland dot plot below that the change in hesitance of the top 20 most hesitant segments in 2021 varies by group. The bar graph below shows the 10 segments that demonstrated the largest changes in hesitance.\n\n\nCode\n#barplot of change\nlibrary(stringr)\nrow_order$rows = str_wrap(row_order$rows, width = 10)\n\nrow_order %&gt;% top_n (10, decline_21_23)  %&gt;% ggplot(aes(x = fct_reorder(rows,rev(decline_21_23)), y = decline_21_23)) +  geom_bar(stat = \"identity\")+\nlabs(title = \"Top 10 categories with the largest 2021-23 changes\", x = \"Group categories\", y = \"2021-23 change in hesitance\") +\n  theme_minimal() + \n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1,size=6),\n        axis.text.y = element_text(size=8),\n        axis.title = element_text(size = 8),\n        plot.title = element_text(size = 8))\n\n\n\n\n\nThe change in hesitance also varies by state:\n#Karl to add\n\n\n3.0.0.3 Part 3: Based on the findings above, we will propose high-level recommendations for segments of the population that need further public health interventions.\nProvide a short nontechnical summary of the most revealing findings of your analysis written for a nontechnical audience. Take extra care to clean up your graphs, ensuring that best practices for presentation are followed, as described in the audience ready style section below.\nUse subheadings (##) as appropriate. See Todd Schneider’s blog posts for examples of thoughtful, informative subheadings. An approach that works well is to create a subheading for each of your research questions.\nThe number of graphs will vary by project; we suggest a target of 10. (A plot with multiple facets counts as 1 graph). If you go over, make sure they are high quality and include commentary. A project with 10 good graphs plus commentary will receive a better grade than a project with 10 good graphs and 10 mediocre ones."
  }
]